# Documents

これは「TodoNote」アプリの開発資料である。

## コンセプト

* オフライン状態でも操作できるTODO管理アプリ
* ユーザーがネットワークの状態を気にすることなく利用できる設計

## 現時点での制約

* v1.0.0 では、TODO登録画面で(タスクの登録・編集中に) アプリが終了した場合、次回起動時に編集を再開することができない

## 画面

### 画面遷移図

<img width="749" alt="screen-transition" src="https://github.com/CH3COOH/todonote-ios/assets/137952/dbdc0ac1-96f2-4873-ade5-7f9c9cbc7da1">

### 画面一覧

| ID   | 画面名 | 備考 |
|:-----|:-----|:-----|
| A-01  | スプラッシュ | |
| A-02  | ログイン  | Firebaseへのログイン |
| A-03  | 通知許諾  | |
| B-01  | ホーム    | タスクのリストを表示する |
| C-01  | TODO登録  | タスクの登録/編集をおこなう |
| S-01  | 設定  | |
| S-02  | ライセンス  | LicensePlistViewController で表示 |
| S-03  | 問い合わせ  | Googleフォームを SFSafariViewController で表示 |

## TODOアイテムについて

TODOアイテムは、ローカル(アプリ内データベース) と バックエンド (Firestore) の両方で管理する。

### TODOアイテムのステータスについて

* TODOアイテムは「editing」「ready」「complete」の3つのステータスを持つ
    * `editing` は 編集中
    * `ready` は、準備完了
    * `complete` は、バックエンドへの同期済み

### TODOアイテムの登録/編集処理

以下は、登録時・編集時のデータフローの簡易的な説明である。詳細については、[データベースの仕様](./Database.md)を参照すること。

* `ready` ステータスのTODOアイテムは、保存時やアプリ起動時にバックエンドにアップロードされる
    * オフライン時の保存でもエラーメッセージは表示しない
* `editing` ステータスのアイテムは、TODO登録画面でのみ扱われ、それ以外の場面での存在は許容しない
    * TODO登録画面の表示中にプロセスを終了した場合、`editing` ステータスのレコードが残る可能性があるため、スプラッシュ画面でそれらのレコードを削除する

## ユースケース一覧

| ID   | ユースケース名 | 備考 |
|:-----|:-----|:-----|
| [BL-A01](./BL/BL-A01.md)  | アプリ起動時  | |
| BL-B01  | TODOリストの取得  | sort option |
| BL-B02  | TODOアイテムの削除 | |
| BL-C01  | TODOアイテムの登録・編集開始  | editing のレコードを作成する |
| BL-C02  | TODOアイテムの登録・編集完了  | |
| BL-C03  | TODOアイテムの編集キャンセル  | editing のレコードを削除する |
| [BL-S02](./BL/BL-S02.md)  | ログアウト  | |
| [BL-Z01](./BL/BL-Z01.md)  | TODOアイテムのアップロード | Firestore へ ready のレコードをアップロード |
| BL-Z02 | TODOアイテムのダウンロード | Firestore からデータをダウンロード |
| [BL-Z03](./BL/BL-Z02.md) | ネットワーク接続状態のチェック |  |
| BL-Z04 | アプリバージョンのチェック |  |
